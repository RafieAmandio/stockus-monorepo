---
phase: 07-frontend-member-area
plan: 09
type: execute
wave: 3
depends_on: ["07-03"]
files_modified:
  - frontend/src/app/(auth)/profile/page.tsx
  - frontend/src/components/member/ProfileForm.tsx
autonomous: true

must_haves:
  truths:
    - "Member can view profile information"
    - "Member can see subscription status"
    - "Profile shows tier and account creation date"
    - "Logout option available"
  artifacts:
    - path: "frontend/src/app/(auth)/profile/page.tsx"
      provides: "Profile management page"
      contains: "ProfileForm|user.tier"
    - path: "frontend/src/components/member/ProfileForm.tsx"
      provides: "Profile display component"
      contains: "email|name|tier"
  key_links:
    - from: "frontend/src/app/(auth)/profile/page.tsx"
      to: "frontend/src/lib/auth/dal.ts"
      via: "getUser call"
      pattern: "getUser"
---

<objective>
Create profile page showing user information, subscription status, and account details. Members can view their profile and tier status.

Purpose: Members manage their account and view subscription information.
Output: Profile page at /profile with user info and subscription status.
</objective>

<execution_context>
@/Users/dio/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dio/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-frontend-member-area/07-03-PLAN.md (Layout, LogoutButton)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create profile components and page</name>
  <files>
    frontend/src/components/member/ProfileForm.tsx
    frontend/src/app/(auth)/profile/page.tsx
  </files>
  <action>
Create `frontend/src/components/member/ProfileForm.tsx`:
```typescript
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'
import { Badge } from '@/components/ui/badge'
import { Separator } from '@/components/ui/separator'
import { User, Mail, Calendar, Shield } from 'lucide-react'
import type { User as UserType } from '@/types/auth'

interface ProfileFormProps {
  user: UserType
}

export function ProfileForm({ user }: ProfileFormProps) {
  const formatDate = (date: string) => {
    return new Date(date).toLocaleDateString('id-ID', {
      day: 'numeric',
      month: 'long',
      year: 'numeric',
    })
  }

  return (
    <Card>
      <CardHeader>
        <CardTitle>Informasi Profil</CardTitle>
        <CardDescription>
          Detail akun dan informasi subscription Anda
        </CardDescription>
      </CardHeader>
      <CardContent className="space-y-6">
        {/* Profile Avatar */}
        <div className="flex items-center gap-4">
          <div className="h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center">
            <span className="text-2xl font-semibold text-primary">
              {user.name.charAt(0).toUpperCase()}
            </span>
          </div>
          <div>
            <h3 className="text-lg font-semibold">{user.name}</h3>
            <p className="text-sm text-muted-foreground">{user.email}</p>
          </div>
        </div>

        <Separator />

        {/* Profile Details */}
        <div className="space-y-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <User className="h-4 w-4 text-muted-foreground" />
              <span className="text-sm text-muted-foreground">Nama</span>
            </div>
            <span className="text-sm font-medium">{user.name}</span>
          </div>

          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <Mail className="h-4 w-4 text-muted-foreground" />
              <span className="text-sm text-muted-foreground">Email</span>
            </div>
            <span className="text-sm font-medium">{user.email}</span>
          </div>

          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <Shield className="h-4 w-4 text-muted-foreground" />
              <span className="text-sm text-muted-foreground">Status</span>
            </div>
            <Badge variant={user.tier === 'member' ? 'default' : 'secondary'}>
              {user.tier === 'member' ? 'Member' : 'Free'}
            </Badge>
          </div>

          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <Calendar className="h-4 w-4 text-muted-foreground" />
              <span className="text-sm text-muted-foreground">Bergabung</span>
            </div>
            <span className="text-sm font-medium">{formatDate(user.createdAt)}</span>
          </div>
        </div>
      </CardContent>
    </Card>
  )
}
```

Create directory `frontend/src/app/(auth)/profile/`.

Create `frontend/src/app/(auth)/profile/page.tsx`:
```typescript
import { Metadata } from 'next'
import Link from 'next/link'
import { getUser } from '@/lib/auth/dal'
import { redirect } from 'next/navigation'
import { ProfileForm } from '@/components/member/ProfileForm'
import { LogoutButton } from '@/components/member/LogoutButton'
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'
import { Button } from '@/components/ui/button'
import { Separator } from '@/components/ui/separator'
import { SITE_NAME } from '@/lib/constants'
import { Crown, ArrowRight, KeyRound } from 'lucide-react'

export const metadata: Metadata = {
  title: `Profil - ${SITE_NAME}`,
  description: 'Kelola profil dan pengaturan akun Anda.',
}

export default async function ProfilePage() {
  const user = await getUser()

  if (!user) {
    redirect('/login')
  }

  return (
    <div className="space-y-6 max-w-2xl">
      <div>
        <h1 className="text-3xl font-bold tracking-tight">Profil</h1>
        <p className="text-muted-foreground">
          Kelola informasi akun dan pengaturan Anda
        </p>
      </div>

      {/* Profile Info */}
      <ProfileForm user={user} />

      {/* Subscription Section */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center gap-2">
            <Crown className="h-5 w-5" />
            Subscription
          </CardTitle>
          <CardDescription>
            Status membership dan informasi langganan
          </CardDescription>
        </CardHeader>
        <CardContent className="space-y-4">
          {user.tier === 'member' ? (
            <div className="p-4 rounded-lg bg-primary/5 border border-primary/20">
              <div className="flex items-center justify-between">
                <div>
                  <p className="font-semibold text-primary">Member Aktif</p>
                  <p className="text-sm text-muted-foreground">
                    Anda memiliki akses penuh ke semua konten
                  </p>
                </div>
                <Crown className="h-8 w-8 text-primary" />
              </div>
            </div>
          ) : (
            <div className="space-y-4">
              <div className="p-4 rounded-lg bg-muted">
                <p className="font-semibold">Akun Gratis</p>
                <p className="text-sm text-muted-foreground">
                  Upgrade untuk akses penuh ke semua kursus, riset, dan template
                </p>
              </div>
              <Button asChild>
                <Link href="/pricing">
                  Upgrade ke Member
                  <ArrowRight className="ml-2 h-4 w-4" />
                </Link>
              </Button>
            </div>
          )}
        </CardContent>
      </Card>

      {/* Account Actions */}
      <Card>
        <CardHeader>
          <CardTitle>Aksi Akun</CardTitle>
          <CardDescription>
            Kelola keamanan dan sesi akun Anda
          </CardDescription>
        </CardHeader>
        <CardContent className="space-y-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <KeyRound className="h-4 w-4 text-muted-foreground" />
              <div>
                <p className="text-sm font-medium">Ubah Password</p>
                <p className="text-xs text-muted-foreground">
                  Reset password melalui email
                </p>
              </div>
            </div>
            <Button variant="outline" size="sm" asChild>
              <Link href="/forgot-password">Reset</Link>
            </Button>
          </div>

          <Separator />

          <div className="flex items-center justify-between">
            <div>
              <p className="text-sm font-medium">Keluar dari Akun</p>
              <p className="text-xs text-muted-foreground">
                Akhiri sesi saat ini
              </p>
            </div>
            <LogoutButton />
          </div>
        </CardContent>
      </Card>
    </div>
  )
}
```
  </action>
  <verify>
Check files exist:
- `frontend/src/components/member/ProfileForm.tsx`
- `frontend/src/app/(auth)/profile/page.tsx`

TypeScript should compile: `cd frontend && npx tsc --noEmit`
Build should succeed: `cd frontend && npm run build`
  </verify>
  <done>Profile page created with user info, subscription status, and account actions.</done>
</task>

</tasks>

<verification>
Run all verification commands:

```bash
cd frontend

# Check TypeScript compiles
npx tsc --noEmit

# Check build succeeds
npm run build

# Verify file structure
ls -la src/app/\(auth\)/profile/
ls -la src/components/member/
```

All should pass without errors.
</verification>

<success_criteria>
1. ProfileForm shows name, email, tier badge, creation date
2. Profile page shows subscription status with appropriate messaging
3. Member users see "Member Aktif" status
4. Free users see upgrade CTA
5. Account actions section with password reset and logout
6. TypeScript compiles without errors
7. Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/07-frontend-member-area/07-09-SUMMARY.md`
</output>
